"use strict";function _classCallCheck(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function r(r,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),OlahJson=function(){function OlahJson(r){_classCallCheck(this,OlahJson),this.json=r}return _createClass(OlahJson,[{key:"query",value:function query(querynya){this.querynya=querynya;var pisahTanya=this.querynya.split("?"),sebelumTanya=pisahTanya[0],setelahTanya=pisahTanya[1],pisahSebelumTanya=sebelumTanya.split("/"),judulTable=pisahSebelumTanya[0],kunci=pisahSebelumTanya[1],selektor=eval("this.json."+judulTable);if(kunci&&(selektor=selektor.filter(function(r){return r.id==kunci})),setelahTanya){var pisahDan=setelahTanya.split("&");for(var n in pisahDan)pisahDan[n]=pisahDan[n].split("=");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=pisahDan[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var x=_step.value;x[0].startsWith("_")?x[0]:selektor=selektor.filter(function(data){return eval("data."+x[0]+".toString().toLowerCase().includes('"+x[1]+"'.toString().toLowerCase())")})}}catch(r){_didIteratorError=!0,_iteratorError=r}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return this.jsonBaru=selektor,this.jsonString=JSON.stringify(this.json),this.jsonBaruString=JSON.stringify(this.jsonBaru).substring(1),this.jsonBaruString=this.jsonBaruString.substring(0,this.jsonBaruString.length-1),this.json=this.jsonBaru,this}},{key:"delete",value:function(){var r=this.jsonString.replace(this.jsonBaruString,"").replace(/,,/g,",").replace(/,\]/g,"]").replace(/\[,/g,"[");return r=JSON.parse(r),this.json=r,this}},{key:"put",value:function(r){var t=this.querynya.split("/")[1];r.id=Number(t),r=JSON.stringify(r);var a=this.jsonString.replace(this.jsonBaruString,r);return a=JSON.parse(a),this.json=a,this}},{key:"post",value:function post(dataPost){var panjangnya=this.json.length,idTerakhir=eval("this.json["+(panjangnya-1)+"].id"),idBaru=idTerakhir+1;dataPost.id=idBaru;var elemenBaruString=JSON.stringify(dataPost),selektor=this.json.filter(function(r){return r.id==idTerakhir}),selektorString=JSON.stringify(selektor).substring(1);selektorString=selektorString.substring(0,selektorString.length-1);var tambahkan=selektorString+","+elemenBaruString,ubah=this.jsonString.replace(selektorString,tambahkan);return ubah=JSON.parse(ubah),this.json=ubah,this}},{key:"get",value:function(){return this.json}}]),OlahJson}();